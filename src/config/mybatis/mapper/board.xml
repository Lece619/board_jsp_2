<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="b">
<!-- mapper : DB에 쿼리문을 요청하고 결과를 돌려받는 속성파일 -->
<!-- 세미콜론 (;)을 절대 쓰지 않는다! 
+ select타입에는 항상 resultType을 작성해주어야 함!-->
<select id="board_list" resultType="board">
	select * from board order by ref desc, step
</select>

<!-- idx number(3) primary key,
	name varchar2(100),
	subject varchar2(255),
	content clob,
	pwd varchar2(100), 
	ip varchar2(100),
	regdate date,
	readhit number(3) default 0,
	ref number(3),
	step number(3), 
	depth number(3) -->
	<!-- 새글 쓰기 ( 댓글 아님 ) -->
	<!-- insert,update,delete에서는 resultType 설정불가능 : 자동으로 정수형으로 지정된다. -->
<insert id="board_insert" parameterType="board">
	insert into board values
	(
	seq_board_idx.nextval,
	#{name},
	#{subject},
	#{content},
	#{pwd},
	#{ip},
	sysdate,
	0,
	seq_board_idx.currval,
	0,
	0
	)
</insert>

<select id="board_one" resultType="board" parameterType="_int">
	SELECT * FROM BOARD WHERE IDX = #{idx}
</select>

<update id="update_readhit" parameterType="_int">
	UPDATE BOARD
	SET	readhit = readhit + 1
	WHERE idx = #{idx}
</update>

</mapper>












